"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.startServer = startServer;
exports.default = void 0;

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _logger = _interopRequireDefault(require("./logger"));

var _appiumBaseDriver = require("appium-base-driver");

var _driver = _interopRequireDefault(require("./driver"));

function startServer() {
  return _startServer.apply(this, arguments);
}

function _startServer() {
  _startServer = (0, _asyncToGenerator2.default)(function* (port = 4884, host = 'localhost') {
    let d = new _driver.default({
      port,
      host
    });
    let router = (0, _appiumBaseDriver.routeConfiguringFunction)(d);
    let server = (0, _appiumBaseDriver.server)(router, port, host);

    _logger.default.info(`Android Uiautomator2 server listening on http://${host}:${port}`);

    d.server = server;
    return yield server;
  });
  return _startServer.apply(this, arguments);
}

var _default = startServer;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9zZXJ2ZXIuanMiXSwibmFtZXMiOlsic3RhcnRTZXJ2ZXIiLCJwb3J0IiwiaG9zdCIsImQiLCJBbmRyb2lkVWlhdXRvbWF0b3IyRHJpdmVyIiwicm91dGVyIiwic2VydmVyIiwibG9nIiwiaW5mbyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O1NBR2VBLFc7Ozs7O2lEQUFmLFdBQTRCQyxJQUFJLEdBQUcsSUFBbkMsRUFBeUNDLElBQUksR0FBRyxXQUFoRCxFQUE2RDtBQUMzRCxRQUFJQyxDQUFDLEdBQUcsSUFBSUMsZUFBSixDQUE4QjtBQUFDSCxNQUFBQSxJQUFEO0FBQU9DLE1BQUFBO0FBQVAsS0FBOUIsQ0FBUjtBQUNBLFFBQUlHLE1BQU0sR0FBRyxnREFBeUJGLENBQXpCLENBQWI7QUFDQSxRQUFJRyxNQUFNLEdBQUcsOEJBQVdELE1BQVgsRUFBbUJKLElBQW5CLEVBQXlCQyxJQUF6QixDQUFiOztBQUNBSyxvQkFBSUMsSUFBSixDQUFVLG1EQUFrRE4sSUFBSyxJQUFHRCxJQUFLLEVBQXpFOztBQUNBRSxJQUFBQSxDQUFDLENBQUNHLE1BQUYsR0FBV0EsTUFBWDtBQUNBLGlCQUFhQSxNQUFiO0FBQ0QsRzs7OztlQUdjTixXIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxvZyBmcm9tICcuL2xvZ2dlcic7XG5pbXBvcnQgeyBzZXJ2ZXIgYXMgYmFzZVNlcnZlciwgcm91dGVDb25maWd1cmluZ0Z1bmN0aW9uIH0gZnJvbSAnYXBwaXVtLWJhc2UtZHJpdmVyJztcbmltcG9ydCBBbmRyb2lkVWlhdXRvbWF0b3IyRHJpdmVyIGZyb20gJy4vZHJpdmVyJztcblxuXG5hc3luYyBmdW5jdGlvbiBzdGFydFNlcnZlciAocG9ydCA9IDQ4ODQsIGhvc3QgPSAnbG9jYWxob3N0Jykge1xuICBsZXQgZCA9IG5ldyBBbmRyb2lkVWlhdXRvbWF0b3IyRHJpdmVyKHtwb3J0LCBob3N0fSk7XG4gIGxldCByb3V0ZXIgPSByb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb24oZCk7XG4gIGxldCBzZXJ2ZXIgPSBiYXNlU2VydmVyKHJvdXRlciwgcG9ydCwgaG9zdCk7XG4gIGxvZy5pbmZvKGBBbmRyb2lkIFVpYXV0b21hdG9yMiBzZXJ2ZXIgbGlzdGVuaW5nIG9uIGh0dHA6Ly8ke2hvc3R9OiR7cG9ydH1gKTtcbiAgZC5zZXJ2ZXIgPSBzZXJ2ZXI7XG4gIHJldHVybiBhd2FpdCBzZXJ2ZXI7XG59XG5cbmV4cG9ydCB7IHN0YXJ0U2VydmVyIH07XG5leHBvcnQgZGVmYXVsdCBzdGFydFNlcnZlcjtcbiJdLCJmaWxlIjoibGliL3NlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLiJ9
